<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>WissenRent</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="" name="keywords">
    <meta content="" name="description">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,400;0,700;0,900;1,400;1,700;1,900&family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap"
        rel="stylesheet">

    <!-- Icon Font Stylesheet -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Libraries Stylesheet -->
    <link href="lib/animate/animate.min.css" rel="stylesheet">
    <link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">

    <!-- Customized Bootstrap Stylesheet -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Template Stylesheet -->
    <link href="css/style.css" rel="stylesheet">

    <style>
        .card-img-top {
            width: 70%;
            height: 400px;
            object-fit: cover;
        }

        .categories-img {
            height: 400px;
            overflow: hidden;
        }

        .categories-img img {
            width: 70%;
            height: 70%;
            object-fit: cover;
        }
    </style>
</head>

<body>

    <!-- Spinner Start -->
    <div id="spinner"
        class="show bg-white position-fixed translate-middle w-100 vh-100 top-50 start-50 d-flex align-items-center justify-content-center">
        <div class="spinner-border text-primary" style="width: 3rem; height: 3rem;" role="status">
            <span class="sr-only">Loading...</span>
        </div>
    </div>
    <!-- Spinner End -->

    @Html.Partial("Carousel")

    <br>

    <!-- Araç Arama Başlangıcı -->
    <div class="container pb-5">
        <div class="text-center mx-auto pb-5 wow fadeInUp" data-wow-delay="0.1s" style="max-width: 800px;">
            <h1 class="display-5 text-capitalize mb-3">Araç <span class="text-primary">Ara</span></h1>
            <p class="mb-0">Tarih ve saat bilgilerini girerek uygun araçları arayın</p>
        </div>
        <form asp-action="SearchCars" method="post">
            <div class="row g-3">
                <div class="col-md-6">
                    <label for="rentalDate" class="form-label">Alış Tarihi</label>
                    <input type="date" class="form-control" id="rentalDate" name="RentalDate" required min="@DateTime.Now.ToString("yyyy-MM-dd")" />
                </div>
                <div class="col-md-6">
                    <label for="rentalTime" class="form-label">Alış Saati</label>
                    <select class="form-control" id="rentalTime" name="RentalTime" required>
                        <option value="08:00">08:00</option>
                        <option value="08:30">08:30</option>
                        <option value="09:00">09:00</option>
                        <option value="09:30">09:30</option>
                        <option value="10:00">10:00</option>
                        <option value="10:30">10:30</option>
                        <option value="11:00">11:00</option>
                        <option value="11:30">11:30</option>
                        <option value="12:00">12:00</option>
                        <option value="12:30">12:30</option>
                        <option value="13:00">13:00</option>
                        <option value="13:30">13:30</option>
                        <option value="14:00">14:00</option>
                        <option value="14:30">14:30</option>
                        <option value="15:00">15:00</option>
                        <option value="15:30">15:30</option>
                        <option value="16:00">16:00</option>
                        <option value="16:30">16:30</option>
                        <option value="17:00">17:00</option>
                        <option value="17:30">17:30</option>
                        <option value="18:00">18:00</option>
                    </select>
                </div>
                <div class="col-md-6">
                    <label for="returnDate" class="form-label">Teslim Tarihi</label>
                    <input type="date" class="form-control" id="returnDate" name="ReturnDate" required min="@DateTime.Now.ToString("yyyy-MM-dd")" />
                </div>
                <div class="col-md-6">
                    <label for="returnTime" class="form-label">Teslim Saati</label>
                    <select class="form-control" id="returnTime" name="ReturnTime" required>
                        <option value="08:00">08:00</option>
                        <option value="08:30">08:30</option>
                        <option value="09:00">09:00</option>
                        <option value="09:30">09:30</option>
                        <option value="10:00">10:00</option>
                        <option value="10:30">10:30</option>
                        <option value="11:00">11:00</option>
                        <option value="11:30">11:30</option>
                        <option value="12:00">12:00</option>
                        <option value="12:30">12:30</option>
                        <option value="13:00">13:00</option>
                        <option value="13:30">13:30</option>
                        <option value="14:00">14:00</option>
                        <option value="14:30">14:30</option>
                        <option value="15:00">15:00</option>
                        <option value="15:30">15:30</option>
                        <option value="16:00">16:00</option>
                        <option value="16:30">16:30</option>
                        <option value="17:00">17:00</option>
                        <option value="17:30">17:30</option>
                        <option value="18:00">18:00</option>
                    </select>
                </div>
                <div class="col-md-6">
                    <label for="pickupOffice" class="form-label">Alış Ofisi</label>
                    <select class="form-control" id="pickupOffice" name="PickupOffice" required>
                        <option value="Istanbul">Istanbul</option>
                        <option value="Ankara">Ankara</option>
                    </select>
                </div>
                <div class="col-md-6">
                    <label for="returnOffice" class="form-label">Teslim Ofisi</label>
                    <select class="form-control" id="returnOffice" name="ReturnOffice" required>
                        <option value="Istanbul">Istanbul</option>
                        <option value="Ankara">Ankara</option>
                    </select>
                </div>
                <div class="col-12">
                    <button type="submit" class="btn btn-primary w-100 py-2">Ara</button>
                </div>
            </div>
        </form>
    </div>
    <!-- Araç Arama Sonu -->

    <!-- Araç Kategorileri Başlangıcı -->
    <div class="container-fluid categories pb-5">
        <div class="container pb-5">
            <div class="text-center mx-auto pb-5 wow fadeInUp" data-wow-delay="0.1s" style="max-width: 800px;">
                <h1 class="display-5 text-capitalize mb-3">Araç <span class="text-primary">Kategorileri</span></h1>
                <p class="mb-0"> Daha fazla bilgi için araçlarımız sayfasını ziyaret edin</p>
            </div>
            <div id="categories" class="categories-carousel owl-carousel wow fadeInUp" data-wow-delay="0.1s">
                @foreach (var car in Model)
                {
                    <div class="categories-item p-4">
                        <div class="categories-item-inner">
                            <div class="categories-img rounded-top">
                                <img src="@car.ImageUrl" class="img-fluid w-100 rounded-top" alt="">
                            </div>
                            <div class="categories-content rounded-bottom p-4">
                                <h4>@car.Make @car.Model</h4>
                                <div class="categories-review mb-4">
                                    <div class="me-3">4.5 Yıldız</div>
                                    <div class="d-flex justify-content-center text-secondary">
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star text-body"></i>
                                    </div>
                                </div>
                                <div class="mb-4">
                                    <h4 class="bg-white text-primary rounded-pill py-2 px-4 mb-0">₺@car.PricePerDay/Günlük
                                    </h4>
                                </div>
                                <div class="row gy-2 gx-0 text-center mb-4">
                                    <div class="col-4 border-end border-white">
                                        <i class="fa fa-users text-dark"></i> <span class="text-body ms-1">4 Koltuk</span>
                                    </div>
                                    <div class="col-4 border-end border-white">
                                        <i class="fa fa-car text-dark"></i>
                                        <span class="text-body ms-1">
                                            @(car.IsAutomatic ? "Otomatik" : "Manuel")
                                        </span>
                                    </div>

                                    <div class="col-4">
                                        <i class="fa fa-gas-pump text-dark"></i> <span
                                            class="text-body ms-1">@car.FuelType</span>
                                    </div>
                                    <div class="col-4 border-end border-white">
                                        <i class="fa fa-car text-dark"></i> <span class="text-body ms-1">@car.Year</span>
                                    </div>
                                    <div class="col-4 border-end border-white">
                                        <i class="fa fa-cogs text-dark"></i>
                                        <span class="text-body ms-1">
                                            @(car.IsAirConditioned ? "Klimalı" : "Klímasız")
                                        </span>
                                    </div>
                                    <div class="col-4">
                                        <i class="fa fa-road text-dark"></i> <span class="text-body ms-1">@car.Mileage
                                            K</span>
                                    </div>
                                </div>
                                <a href="#"
                                    class="btn btn-primary rounded-pill d-flex justify-content-center py-3">Kirala</a>
                            </div>
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>

    <!-- Back to Top -->
    <a href="#" class="btn btn-secondary btn-lg-square rounded-circle back-to-top"><i class="fa fa-arrow-up"></i></a>

    <!-- JavaScript Libraries -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="lib/wow/wow.min.js"></script>
    <script src="lib/easing/easing.min.js"></script>
    <script src="lib/waypoints/waypoints.min.js"></script>
    <script src="lib/counterup/counterup.min.js"></script>
    <script src="lib/owlcarousel/owl.carousel.min.js"></script>

    <!-- Template Javascript -->
    <script src="js/main.js"></script>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            let timeInput = document.getElementById("rentalTime");
            let dateInput = document.getElementById("rentalDate");

            function updateMinTime() {
                let now = new Date();
                let hours = now.getHours().toString().padStart(2, '0');
                let minutes = now.getMinutes().toString().padStart(2, '0');
                let minTime = `${hours}:${minutes}`;
                timeInput.querySelectorAll("option").forEach(option => {
                    if (option.value < minTime) {
                        option.disabled = true;
                    } else {
                        option.disabled = false;
                    }
                });
            }

            updateMinTime();

            dateInput.addEventListener("change", function () {
                let selectedDate = new Date(this.value);
                let today = new Date();

                if (selectedDate.toDateString() === today.toDateString()) {
                    updateMinTime();
                } else {
                    timeInput.querySelectorAll("option").forEach(option => {
                        option.disabled = false;
                    });
                }
            });
        });
    </script>
</body>

</html>